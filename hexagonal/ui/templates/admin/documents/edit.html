{% extends "admin/layout.html" %}

{% block admin_body %}
  <h4>Edit document</h4>
  <div id="new-form">
    {% if document.type == 'book' %}
      <form class="ui form" action="#" method="POST">
        <input type="hidden" name="type" value="book"/>
        <div class="field">
          <label>Title</label>
          <input type="text" name="title" placeholder="Introduction to Algorithms" value="{{ document.title }}"/>
        </div>
        <div class="fields">
          <div class="three wide field">
            <label>Price</label>
            <div class="ui right labeled input">
              <input type="number" name="price" placeholder="100" value="{{ document.price }}"/>
              <div class="ui basic label">
                ₽
              </div>
            </div>
          </div>
          <div class="five wide field">
            <label>Copy delta ({{ document.get_available_copies() | length }} available now)</label>
            <input type="number" name="copy_delta" placeholder="Use +N to add or -N to remove">
          </div>
          <div class="eight wide field">
            <label>Keywords (comma separated)</label>
            <input type="text" name="keywords" placeholder="action, fantasy"
                   value="{{ ', '.join(document.keywords) }}"/>
          </div>
        </div>
        <div class="field">
          <label>Authors (comma separated)</label>
          <input type="text" name="authors"
                 placeholder="Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, Clifford Stein"
                 value="{{ ', '.join(document.authors) }}"/>
        </div>
        <div class="fields">
          <div class="four wide field">
            <label>Edition</label>
            <input type="number" name="edition" placeholder="3" value="{{ document.edition }}"/>
          </div>
          <div class="five wide field">
            <label>Publisher</label>
            <input type="text" name="publisher" placeholder="MIT Press" value="{{ document.publisher }}"/>
          </div>
          <div class="three wide field">
            <label>Year</label>
            <input type="number" name="publishment_year" placeholder="2009" value="{{ document.publishment_year }}">
          </div>
          <div class="four wide field">
            <div class="ui toggle checkbox">
              <br>
              <input type="checkbox" name="bestseller" {% if document.bestseller %} checked {% endif %}/>
              <label>Bestseller</label>
            </div>
          </div>
        </div>
        <button type="submit" class="ui fluid blue button">
          Submit
        </button>
      </form>
    {% endif %}
    {% if document.type == 'av' %}
      <form class="ui form" action="#" method="POST">
        <input type="hidden" name="type" value="book"/>
        <div class="field">
          <label>Title</label>
          <input type="text" name="title" placeholder="The Big Book"/>
        </div>
        <div class="fields">
          <div class="eight wide field">
            <label>Price</label>
            <div class="ui right labeled input">
              <input type="number" name="price" placeholder="100"/>
              <div class="ui basic label">
                ₽
              </div>
            </div>
          </div>
          <div class="eight wide field">
            <label>Keywords (comma separated)</label>
            <input type="text" name="keywords" placeholder="action, fantasy"/>
          </div>
        </div>
        <div class="fields">
          <div class="thirteen wide field">
            <label>Authors (comma separated)</label>
            <input type="text" name="authors" placeholder="J.K Rowling, Paul Erdos"/>
          </div>
          <div class="three wide field">
            <label>Copies</label>
            <input type="number" name="copies" placeholder="1">
          </div>
        </div>
        <button type="submit" class="ui fluid blue button">
          Submit
        </button>
      </form>
    {% endif %}
    {% if document.type == 'article' %}
      <form class="ui form" action="#" method="POST">
        <input type="hidden" name="type" value="book"/>
        <div class="field">
          <label>Title</label>
          <input type="text" name="title" placeholder="Go to Statement Considered Harmful"/>
        </div>
        <div class="fields">
          <div class="eight wide field">
            <label>Price</label>
            <div class="ui right labeled input">
              <input type="number" name="price" placeholder="100"/>
              <div class="ui basic label">
                ₽
              </div>
            </div>
          </div>
          <div class="eight wide field">
            <label>Keywords (comma separated)</label>
            <input type="text" name="keywords" placeholder="action, fantasy"/>
          </div>
        </div>
        <div class="fields">
          <div class="thirteen wide field">
            <label>Authors (comma separated)</label>
            <input type="text" name="authors" placeholder="Edsger W. Dijkstra, Some O.T.H.E.R. Guy"/>
          </div>
          <div class="three wide field">
            <label>Copies</label>
            <input type="number" name="copies" placeholder="1">
          </div>
        </div>
        <div class="three column fields">
          <div class="field">
            <label>Issue publication date</label>
            <div class="ui calendar" id="publication-date-calendar">
              <div class="ui left icon input">
                <i class="calendar icon"></i>
                <input type="text" placeholder="March 1, 1968" name="issue_publication_date">
              </div>
            </div>
          </div>
          <div class="field">
            <label>Issue editor</label>
            <input type="text" name="issue_editor" placeholder="Edward Nash Yourdon">
          </div>
          <div class="field">
            <label>Journal</label>
            <input type="text" name="journal" placeholder="Communication ACM">
          </div>
        </div>
        <button type="submit" class="ui fluid blue button">
          Submit
        </button>
      </form>
    {% endif %}
  </div>


  <script>
      $('#new-form .menu .item').tab({context: $('#new-form')});
      $('.ui.checkbox').checkbox();
      $('.ui.calendar').calendar({type: 'date'});
  </script>

{% endblock %}